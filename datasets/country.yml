name: "country ingestion"
description: "Ingestion pipeline for data processing and transformation."
version: "1.0.0"

dataset:
  name: "country"
  description: "Dataset containing country information."
  source:
    type: "api_endpoint"
    url: "https://apigw.singaporeair.com/api/uat/v1/destinations/get"
    method: "POST"
    headers:
      x-csl-client-uuid: "client_uuid"
      x-signature: "client_signature"
      api_key: "api_key"
      options:
        context:
          apiKey: "destination.apiKey"
          secret: "destination.secret"

datasource:
  driver:
    package: "drivers.sqlite_driver"
    class: "SQLiteDriver"
    options:
  database:
    name: "database.db"
    connection_url: "sqlite:///storage/database.db"
    options:
      echo: false
  table:
    name: "dim_country"
    columns:
      - countryCode: "f_country_code"
        countryName: "f_country_name"
    mode: "truncate"
    batch_size: 1000
    options:

modules:
  entry:
    package: "entry.api_entry"
    class: "ApiEntry"
  dao:
    package: "repositories.country_dao"
    class: "CountryDAO"
  ingestion:
    package: "ingestion.api_ingestion.country_api_ingestion"
    class: "CountryApiIngestion"
  api_gateway:
    package: "gateway.api_gateway"
    class: "ApiGateway"
  service:
    package: "services.country_service"
    class: "CountryService"